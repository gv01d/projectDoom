#include <math.h>
#include <stdio.h>
#include <GL/glut.h>
#include <stdbool.h>

#include "MEng.h"
int fA[] =
    {
        5, 7,
        //-------------// A
        0, 1, 1, 1, 0, //
        1, 0, 0, 0, 1, //
        1, 1, 1, 1, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
                       // B
        1, 1, 1, 1, 0, //
        1, 0, 0, 0, 1, //
        1, 1, 1, 1, 0, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 1, 1, 1, 0, //
                       // C
        0, 1, 1, 1, 0, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 1, //
        0, 1, 1, 1, 0, //
                       // D
        1, 1, 1, 1, 0, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 1, 1, 1, 0, //
                       // E
        1, 1, 1, 1, 1, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 1, 1, 1, 0, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 1, 1, 1, 1, //
                       // F
        1, 1, 1, 1, 1, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 1, 1, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
                       // G
        0, 1, 1, 1, 1, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 1, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        0, 1, 1, 1, 0, //
                       // H
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 1, 1, 1, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
                       // I
        0, 1, 1, 1, 0, //
        0, 0, 1, 0, 0, //
        0, 0, 1, 0, 0, //
        0, 0, 1, 0, 0, //
        0, 0, 1, 0, 0, //
        0, 0, 1, 0, 0, //
        0, 1, 1, 1, 0, //
                       // J
        0, 0, 0, 0, 1, //
        0, 0, 0, 0, 1, //
        0, 0, 0, 0, 1, //
        0, 0, 0, 0, 1, //
        0, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        0, 1, 1, 1, 0, //
                       // K
        1, 0, 0, 0, 1, //
        1, 0, 0, 1, 0, //
        1, 1, 1, 0, 0, //
        1, 0, 0, 1, 0, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
                       // L
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 1, 1, 1, 1, //
                       // M
        1, 0, 0, 0, 1, //
        1, 1, 0, 1, 1, //
        1, 0, 1, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
                       // N
        1, 0, 0, 0, 1, //
        1, 1, 0, 0, 1, //
        1, 0, 1, 0, 1, //
        1, 0, 0, 1, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
                       // O
        0, 1, 1, 1, 0, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        0, 1, 1, 1, 0, //
                       // P
        1, 1, 1, 1, 0, //
        1, 0, 0, 0, 1, //
        1, 1, 1, 1, 0, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 0, 0, 0, 0, //
                       // Q
        0, 1, 1, 1, 0, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 1, 0, //
        0, 1, 1, 0, 1, //
                       // R
        1, 1, 1, 1, 0, //
        1, 0, 0, 0, 1, //
        1, 1, 1, 1, 0, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
                       // S
        0, 1, 1, 1, 1, //
        1, 0, 0, 0, 0, //
        0, 1, 1, 1, 0, //
        0, 0, 0, 0, 1, //
        0, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        0, 1, 1, 1, 0, //
                       // T
        1, 1, 1, 1, 1, //
        0, 0, 1, 0, 0, //
        0, 0, 1, 0, 0, //
        0, 0, 1, 0, 0, //
        0, 0, 1, 0, 0, //
        0, 0, 1, 0, 0, //
        0, 0, 1, 0, 0, //
                       // U
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        0, 1, 1, 1, 0, //
                       // V
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        0, 1, 0, 1, 0, //
        0, 1, 0, 1, 0, //
        0, 0, 1, 0, 0, //
                       // W
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 1, 0, 1, //
        1, 1, 0, 1, 1, //
        1, 0, 0, 0, 1, //
                       // X
        1, 0, 0, 0, 1, //
        0, 1, 0, 1, 0, //
        0, 0, 1, 0, 0, //
        0, 1, 0, 1, 0, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
        1, 0, 0, 0, 1, //
                       // Z
        1, 1, 1, 1, 1, //
        0, 0, 0, 0, 1, //
        0, 0, 0, 1, 0, //
        0, 0, 1, 0, 0, //
        0, 1, 0, 0, 0, //
        1, 0, 0, 0, 0, //
        1, 1, 1, 1, 1  //
};

int *getFA()
{
    return fA;
}

int character(char c, int x, int y, int pScale, int pSize, int col, int *font)
{
    int xS = font[0];
    int S = font[0] * font[1];
    int p = ((c - 65) * S) + 2;
    printf("(%d)-\n", p);
    printf("ret");

    if (c == ' ')
    {
        return ((xS * pSize) / MpixelScale) + 1;
    }

    setCol(col);
    glPointSize(pSize);
    glBegin(GL_POINTS);
    for (int i = 0; i < S; i++)
    {
        printf("%d,", font[p + i]);
        if (font[p + i] == 1)
        {
            glVertex2i(x * MpixelScale + (i % xS) * pSize, y * MpixelScale - (i / xS) * pSize);
        }
    }
    printf("\n");
    /*
    glVertex2i(x * MpixelScale + 2, y * MpixelScale + 2);
    glVertex2i(x * MpixelScale + 2, y * MpixelScale + 4);
    glVertex2i(x * MpixelScale + 2, y * MpixelScale + 6);
    glVertex2i(x * MpixelScale + 2, y * MpixelScale + 8);
    glVertex2i(x * MpixelScale + 4, y * MpixelScale + 10);
    glVertex2i(x * MpixelScale + 6, y * MpixelScale + 10);
    glVertex2i(x * MpixelScale + 8, y * MpixelScale + 8);
    glVertex2i(x * MpixelScale + 8, y * MpixelScale + 6);
    glVertex2i(x * MpixelScale + 8, y * MpixelScale + 4);
    glVertex2i(x * MpixelScale + 8, y * MpixelScale + 2);
    glVertex2i(x * MpixelScale + 6, y * MpixelScale + 4);
    glVertex2i(x * MpixelScale + 4, y * MpixelScale + 4);
    */
    glEnd();
    return ((xS * pSize) / MpixelScale) + 1;
}

int write(char *text, int x, int y, int pScale, int pSize, int col, int *font)
{
    int xI = x;
    for (size_t i = 0; i < strlen(text); i++)
    {
        x += character(text[i], x, y, pScale, pSize, col, font);
    }
    return x - xI;
}
